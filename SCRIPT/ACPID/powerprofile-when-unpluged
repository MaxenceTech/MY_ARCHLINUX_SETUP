#!/bin/bash

#==============================================================================
# AC Adapter Unplugged Script
#==============================================================================
# Description: Power management script executed when AC adapter is disconnected
#              Switches system to power-saving mode to extend battery life
# Author: MaxenceTech
# Usage: Called automatically by ACPI handler when adapter is unplugged
#==============================================================================


# Set power profile to performance mode
powerprofilesctl set performance

# Wait for system to stabilize
sleep 5

#Enable turno boost
echo 0 | tee /sys/devices/system/cpu/intel_pstate/no_turbo

# Set CPU governors to balanced_performance mode
echo performance | tee /sys/devices/system/cpu/cpu*/cpufreq/scaling_governor
echo balance_performance | tee /sys/devices/system/cpu/cpu*/cpufreq/energy_performance_preference
echo 4 | tee /sys/devices/system/cpu/cpu*/power/energy_perf_bias
